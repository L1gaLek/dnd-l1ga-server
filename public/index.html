<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Мини D&D</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<!-- ================== LOGIN ================== -->
<div id="login-container">
  <h2>Вход в игру</h2>
  <input type="text" id="username" placeholder="Введите имя">
  <select id="role">
    <option value="GM">GM</option>
    <option value="DnD-Player">Игрок</option>
    <option value="Spectator">Наблюдатель</option>
  </select>
  <button id="joinBtn">Войти</button>
  <p id="loginError" style="color:red;"></p>
</div>

<!-- ================== MAIN GAME ================== -->
<div id="main-container" style="display:none;">

  <!-- Верхняя строка -->
  <div id="status-bar">
    <span>Вы: <strong id="myName">-</strong></span> |
    <span>Роль: <strong id="myRole">-</strong></span>
  </div>

  <!-- Контент: 2 колонки -->
  <div id="content-row">

<!-- Левая панель -->
<div id="action-log-container">

  <!-- ЖУРНАЛ -->
  <div id="action-log">
    <h3>Журнал действий:</h3>
    <ul id="log-list"></ul>
  </div>

  <!-- СТРОКА ПОД ЖУРНАЛОМ -->
  <div id="action-bottom-row">

    <!-- УПРАВЛЕНИЕ ИГРОКАМИ -->
    <div id="player-management">
      <h3>Управление игроками:</h3>

      <div id="player-controls">
        <input type="text" id="player-name" placeholder="Имя игрока">
        <input type="color" id="player-color" value="#ff0000">

<label>Размер:
  <select id="player-size">
    <option value="1">1x1</option>
    <option value="2">2x2</option>
    <option value="3">3x3</option>
    <option value="4">4x4</option>
    <option value="5">5x5</option>
  </select>
</label>

        <div class="player-type">
          <label class="type-item">
            <input type="checkbox" id="is-base">
            Основа
          </label>
        </div>

        <button id="add-player">Добавить игрока</button>
        <button id="roll-initiative">Бросить инициативу</button>
      </div>
    </div>

    <!-- ИГРОКИ И ИНИЦИАТИВА -->
    <div id="player-list-container">
      <h3>Игроки и инициатива:</h3>
      <ul id="player-list"></ul>
    </div>

  </div>
</div>

    <!-- Игровая колонка -->
    <div id="game-container">

      <div id="current-turn">
        Текущий игрок: <span id="current-player">-</span>
      </div>

      <div id="board-settings">
        <label>Ширина поля:
          <input type="number" id="board-width" value="10" min="1" max="20">
        </label>
        <label>Высота поля:
          <input type="number" id="board-height" value="10" min="1" max="20">
        </label>
        <button id="create-board">Создать поле</button>
      </div>

      <div id="board-wrapper">
        <div id="game-board"></div>
      </div>

      <div id="controls">
        <select id="dice">
          <option value="4">d4</option>
          <option value="6">d6</option>
          <option value="8">d8</option>
          <option value="10">d10</option>
          <option value="12">d12</option>
          <option value="20">d20</option>
          <option value="100">d100</option>
        </select>
        <button id="roll">Бросить кубик</button>
        <button id="end-turn">Конец хода</button>
        <span id="roll-result">Результат: -</span>
      </div>

      <div id="initiative-warning" style="display:none; color: orange; font-weight: bold;">
        Бросьте инициативу за своих персонажей!
      </div>

      <div id="environment-controls">
        <button id="edit-environment">Редактирование окружения: ВЫКЛ</button>
        <button id="add-wall" disabled>Добавить стену</button>
        <button id="remove-wall" disabled>Удалить стену</button>
        <button id="reset-game">Сбросить игру полностью</button>
        <button id="clear-board">Очистить поле</button>
        <button id="start-initiative">Фаза инициативы</button>
        <button id="start-combat">Начало боя</button>
      </div>

    </div>
  </div>
</div>

<!-- ================== MODAL: SHEET INFO ================== -->
<div id="sheet-modal" class="modal-overlay hidden" aria-hidden="true">
  <div class="modal">
    <div class="modal-header">
      <div>
        <div class="modal-title" id="sheet-title">Информация о персонаже</div>
        <div class="modal-subtitle" id="sheet-subtitle"></div>
      </div>
      <button id="sheet-close" class="modal-close" title="Закрыть">✕</button>
    </div>

    <div class="modal-body">
      <div id="sheet-actions" class="sheet-actions"></div>
      <div id="sheet-content" class="sheet-content"></div>
    </div>
  </div>
</div>

<script src="info-dnd-player.js" defer></script>
<script src="client.js" defer></script>

<!-- Dice Visualizer (bottom-left) -->
<div id="dice-viz" class="dice-viz">
  <div class="dice-viz-title">Бросок</div>
  <canvas id="dice-canvas" width="130" height="130"></canvas>
  <div class="dice-viz-meta">
    <span id="dice-viz-kind">d20</span>
    <span id="dice-viz-value">—</span>
  </div>
</div>
  
</body>
</html>


